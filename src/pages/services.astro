---
import BaseLayout from '../layouts/BaseLayout.astro';
import '../styles/cardCarousel.css';
import { getCollection } from 'astro:content';

// Get all services and sort by order
const services = await getCollection('services');
const sortedServices = services.sort((a, b) => a.data.order - b.data.order);
---

<BaseLayout title="Services">
  <section class="py-10 relative">
    <div class="container mx-auto px-4">
      <h1 class="text-4xl font-bold mb-8 text-center font-serif">Our Services</h1>

      <div class="card-carousel">
        {sortedServices.map((service, index) => (
          <div class="carousel-card" data-index={index}>
            <div class="card-content bg-dark-card p-8 rounded-lg">
              <h2 class="text-2xl font-bold mb-4 text-gold font-serif">{service.data.title}</h2>
              {service.data.description && (
                <p class="text-gray-300 mb-4">
                  {service.data.description}
                </p>
              )}
              {service.data.listItems && service.data.listItems.length > 0 && (
                <ul class="list-disc list-inside space-y-2 text-gray-300">
                  {service.data.listItems.map((item) => (
                    <li>{item}</li>
                  ))}
                </ul>
              )}
            </div>
          </div>
        ))}
      </div>

      <div class="progress-bar">
        <div class="progress-indicator"></div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  import { initCardCarousel } from '../scripts/cardCarousel.js';

  document.addEventListener('DOMContentLoaded', () => {
    initCardCarousel();
  });
</script>
